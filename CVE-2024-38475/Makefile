all: docker

docker: Dockerfile
	docker build --tag devmanner/httpd_test .

run:
	docker run -it -p 8080:80 devmanner/httpd_test

test:
	docker run -p 8081:80 --name run_httpd_test -d -t devmanner/httpd_test
	curl 'http://localhost:8081/cgi-bin/my_cgi_script.pl'
	curl 'http://localhost:8081/html/usr/local/apache2/cgi-bin/my_cgi_script.pl%3f'
	docker kill run_httpd_test
	docker rm run_httpd_test


clean:
	docker rmi -f devmanner/httpd_test
